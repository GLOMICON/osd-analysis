The scripts in this folder import data from the EMG pipeline such as the InterPro results from the OSD metagenomes. The scripts are described below...


### import_ipr

#### inputs
* InterPro results from the EMG pipeline
* Mapping between ENA run accession and OSD site labels

#### outputs
* A count table enumerating InterPro hits per OSD site
* A table mapping each InterPro accession to its description

#### description
This script pulls the IPR results from the MPI's ownCloud servers, formats them as a
count table with OSD sites as rows and IPR codes as columns. Note that EMG uses its own
identifiers for each sample (i.e. OSD site); therefore, the script also pulls a mapping
of EMG codes to OSD site labels from the MPI ownCloud and renames the sites with OSD
labels to be compatible with the other imports.

We have validated the names, however, encourage every user to double check and post an issue
if there are any inconsistencies.

Aside from the count table, a two column table mapping each InterPro accession to its description
is generated.

### ipr_css_transform
#### inputs
* This script will use the count table generated by import_ipr.R. If it is not present, it will 
automatically run the import script

#### outputs
* A CSS-transformed count table

#### description
This script performs a cumuluative-sum scaling as described by Paulson et al on the IPR Data
generated by the EMG pipeline.

Paulson et al. claim that this quantile-based transformation is more stable than a simple 
total-sum standardisation as the scaling factor for each sample's counts is controlled by both
the count data of the sample and the entire data set. This leads to a more homogenous outcome.
We use the median of the scaling factors in this script.

See http://dx.doi.org/10.1038/nmeth.2658 for further description of the method.

### ipr_hellinger_transform
#### inputs
* This script will use the count table generated by import_ipr.R. If it is not present, it will 
automatically run the import script

#### outputs
* A Hellinger-transformed count table

#### description
This script performs a Hellinger transformation using the vegan package. In each row (sample, site)
counts are transformed by taking the square-root of the quotient between each count and the row
total. This method is often used in numerical ecology to restrain the influence of large counts. 

### ipr_tss_transform
#### inputs
* This script will use the count table generated by import_ipr.R. If it is not present, it will 
automatically run the import script

#### outputs
* A TSS-transformed count table

#### description
This script performs a simple total-sum standardisation on the IPR count data. Counts are divided
by their row totals.